
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>An interactive Git Tutorial: the tool you didn’t know you needed &#8212; Collaborative and Reproducible Data Science</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Git Visuals" href="git-visuals.html" />
    <link rel="prev" title="Syllabus for Statistics 159/259: Reproducible and Collaborative Statistical Data Science" href="../../syllabus.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Collaborative and Reproducible Data Science</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../overview.html">
   Statistics 159/259, Spring 2022 Course Summary
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Overview
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../schedule.html">
   Statistics 159/259: Weekly Plan
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Syllabus
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../syllabus.html">
   Syllabus for Statistics 159/259: Reproducible and Collaborative Statistical Data Science
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   An interactive Git Tutorial: the tool you didn’t know you needed
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="git-visuals.html">
   Git Visuals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro-jupyter/Index.html">
   An overview of Jupyter tools
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../lab/lab01/lab01.html">
   Lab Session 1 - Introduction to Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lab/lab02/lab02.html">
   Lab Session 2: GitHub &amp; The Shell
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lab/lab03/lab03.html">
   Lab Session 3: Solving Conflicts in Git
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lab/lab04/lab04.html">
   Lab Session 4: Version control with Jupytext
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../lab/lab05/lab05.html">
   Lab Session 5: Climate data and xarray
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/lectures/intro-git/Git-Tutorial.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/lectures/intro-git/Git-Tutorial.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#from-personal-workflows-to-open-collaboration">
   From personal workflows to open collaboration
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wikipedia">
   Wikipedia
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#git-is-an-enabling-technology-use-version-control-for-everything">
   Git is an enabling technology: Use version control for everything
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#teaching-courses-with-git">
   Teaching courses with Git
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#annotated-history-of-each-student-s-worfklow-and-backup">
   Annotated history of each student’s worfklow (and backup!)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-plan-for-this-tutorial">
   The plan for this tutorial
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#very-high-level-picture-an-overview-of-key-concepts">
   Very high level picture: an overview of key concepts
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#first-things-first-git-must-be-configured-before-first-use">
   First things first: git must be configured before first use
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convenient-credentials-management">
     Convenient credentials management
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#stage-1-local-single-user-linear-workflow">
   Stage 1: Local, single-user, linear workflow
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-init-create-an-empty-repository">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       init
      </span>
     </code>
     : create an empty repository
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-add-tell-git-about-this-new-file">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       add
      </span>
     </code>
     : tell git about this new file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-commit-permanently-record-our-changes-in-git-s-database">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       commit
      </span>
     </code>
     : permanently record our changes in git’s database
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-log-what-has-been-committed-so-far">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       log
      </span>
     </code>
     : what has been committed so far
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-diff-what-have-i-changed">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       diff
      </span>
     </code>
     : what have I changed?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-cycle-of-git-virtue-work-commit-work-commit">
     The cycle of git virtue: work, commit, work, commit, …
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-log-revisited">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       log
      </span>
     </code>
     revisited
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-mv-and-rm-moving-and-removing-files">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       mv
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       rm
      </span>
     </code>
     : moving and removing files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise">
     Exercise
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#local-user-branching">
   Local user, branching
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-remotes-as-a-single-user">
   Using remotes as a single user
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#an-important-aside-conflict-management">
     An important aside: conflict management
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#collaborating-on-github-with-a-small-team">
   Collaborating on github with a small team
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#full-contact-github-distributed-collaboration-with-large-teams">
   Full-contact github: distributed collaboration with large teams
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#other-useful-commands">
   Other useful commands
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#git-resources">
   Git resources
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#introductory-materials">
     Introductory materials
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#beyond-the-basics">
     Beyond the basics
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-few-useful-tips-for-common-tasks">
     A few useful tips for common tasks
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#better-shell-support">
       Better shell support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#embedding-git-information-in-latex-documents">
       Embedding Git information in LaTeX documents
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#git-export">
       git export
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>An interactive Git Tutorial: the tool you didn’t know you needed</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#from-personal-workflows-to-open-collaboration">
   From personal workflows to open collaboration
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#wikipedia">
   Wikipedia
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#git-is-an-enabling-technology-use-version-control-for-everything">
   Git is an enabling technology: Use version control for everything
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#teaching-courses-with-git">
   Teaching courses with Git
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#annotated-history-of-each-student-s-worfklow-and-backup">
   Annotated history of each student’s worfklow (and backup!)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-plan-for-this-tutorial">
   The plan for this tutorial
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#very-high-level-picture-an-overview-of-key-concepts">
   Very high level picture: an overview of key concepts
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#first-things-first-git-must-be-configured-before-first-use">
   First things first: git must be configured before first use
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convenient-credentials-management">
     Convenient credentials management
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#stage-1-local-single-user-linear-workflow">
   Stage 1: Local, single-user, linear workflow
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-init-create-an-empty-repository">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       init
      </span>
     </code>
     : create an empty repository
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-add-tell-git-about-this-new-file">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       add
      </span>
     </code>
     : tell git about this new file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-commit-permanently-record-our-changes-in-git-s-database">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       commit
      </span>
     </code>
     : permanently record our changes in git’s database
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-log-what-has-been-committed-so-far">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       log
      </span>
     </code>
     : what has been committed so far
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-diff-what-have-i-changed">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       diff
      </span>
     </code>
     : what have I changed?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-cycle-of-git-virtue-work-commit-work-commit">
     The cycle of git virtue: work, commit, work, commit, …
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-log-revisited">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       log
      </span>
     </code>
     revisited
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#git-mv-and-rm-moving-and-removing-files">
     <code class="docutils literal notranslate">
      <span class="pre">
       git
      </span>
      <span class="pre">
       mv
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       rm
      </span>
     </code>
     : moving and removing files
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise">
     Exercise
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#local-user-branching">
   Local user, branching
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-remotes-as-a-single-user">
   Using remotes as a single user
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#an-important-aside-conflict-management">
     An important aside: conflict management
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#collaborating-on-github-with-a-small-team">
   Collaborating on github with a small team
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#full-contact-github-distributed-collaboration-with-large-teams">
   Full-contact github: distributed collaboration with large teams
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#other-useful-commands">
   Other useful commands
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#git-resources">
   Git resources
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#introductory-materials">
     Introductory materials
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#beyond-the-basics">
     Beyond the basics
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-few-useful-tips-for-common-tasks">
     A few useful tips for common tasks
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#better-shell-support">
       Better shell support
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#embedding-git-information-in-latex-documents">
       Embedding Git information in LaTeX documents
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#git-export">
       git export
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="an-interactive-git-tutorial-the-tool-you-didn-t-know-you-needed">
<h1>An interactive Git Tutorial: the tool you didn’t know you needed<a class="headerlink" href="#an-interactive-git-tutorial-the-tool-you-didn-t-know-you-needed" title="Permalink to this headline">¶</a></h1>
<div class="section" id="from-personal-workflows-to-open-collaboration">
<h2>From personal workflows to open collaboration<a class="headerlink" href="#from-personal-workflows-to-open-collaboration" title="Permalink to this headline">¶</a></h2>
<p><strong>Note:</strong> this tutorial was particularly modeled, and therefore owes a lot, to the excellent materials offered in:</p>
<ul class="simple">
<li><p>“Git for Scientists: A Tutorial” by John McDonnell (no link as this tutorial seems to have disappeared from the internet).</p></li>
<li><p>Emanuele Olivetti’s lecture notes and exercises from the G-Node summer school on <a class="reference external" href="https://python.g-node.org/wiki/schedule">Advanced Scientific Programming in Python</a>.</p></li>
</ul>
<p>In particular I’ve reused the excellent images from the <a class="reference external" href="http://git-scm.com/book">Pro Git book</a> that John had already selected and downloaded, as well as some of his outline.  But this version of the tutorial aims to be 100% reproducible by being executed directly as an IPython notebook and is hosted itself on github so that others can more easily make improvements to it by collaborating on Github.  Many thanks to John and Emanuele for making their materials available online.</p>
<p>After writing this document, I discovered <a class="reference external" href="https://github.com/jrjohansson">J.R. Johansson</a>’s <a class="reference external" href="http://nbviewer.ipython.org/urls/raw.github.com/jrjohansson/scientific-python-lectures/master/Lecture-7-Revision-Control-Software.ipynb">tutorial on version control</a> that is also written as a fully reproducible notebook and is also aimed at a scientific audience.  It has a similar spirit to this one, and is part of his excellent series <a class="reference external" href="https://github.com/jrjohansson/scientific-python-lectures">Lectures on Scientific Computing with Python</a> that is entirely available as Jupyter Notebooks.</p>
</div>
<div class="section" id="wikipedia">
<h2>Wikipedia<a class="headerlink" href="#wikipedia" title="Permalink to this headline">¶</a></h2>
<p>“Revision control, also known as version control, source control
or software configuration management (SCM), is the
<strong>management of changes to documents, programs, and other
information stored as computer files.</strong>”</p>
<p><strong>Reproducibility?</strong></p>
<ul class="simple">
<li><p>Tracking and recreating every step of your work</p></li>
<li><p>In the software world: it’s called <em>Version Control</em>!</p></li>
</ul>
<p>What do (good) version control tools give you?</p>
<ul class="simple">
<li><p>Peace of mind (backups)</p></li>
<li><p>Freedom (exploratory branching)</p></li>
<li><p>Collaboration (synchronization)</p></li>
</ul>
</div>
<div class="section" id="git-is-an-enabling-technology-use-version-control-for-everything">
<h2>Git is an enabling technology: Use version control for everything<a class="headerlink" href="#git-is-an-enabling-technology-use-version-control-for-everything" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Paper writing (never get <code class="docutils literal notranslate"><span class="pre">paper_v5_john_jane_final_oct22_really_final.tex</span></code> by email again!)</p></li>
<li><p>Grant writing</p></li>
<li><p>Everyday research</p></li>
<li><p>Teaching (never accept an emailed homework assignment again!)</p></li>
</ul>
</div>
<div class="section" id="teaching-courses-with-git">
<h2>Teaching courses with Git<a class="headerlink" href="#teaching-courses-with-git" title="Permalink to this headline">¶</a></h2>
<p><img alt="" src="../../_images/indefero_projects_notes.png" /></p>
<!-- offline: 
<img src="files/images/indefero_projects_notes.png" width="100%">
<img src="https://raw.github.com/fperez/reprosw/master/fig/indefero_projects_notes.png" width="100%">
--></div>
<div class="section" id="annotated-history-of-each-student-s-worfklow-and-backup">
<h2>Annotated history of each student’s worfklow (and backup!)<a class="headerlink" href="#annotated-history-of-each-student-s-worfklow-and-backup" title="Permalink to this headline">¶</a></h2>
<!-- offline: 
    <img src="files/images/indefero_projects1.png" width="100%">
<img src="https://raw.github.com/fperez/reprosw/master/fig/indefero_projects1.png" width="100%">
    -->
<p><img alt="" src="../../_images/indefero_projects1.png" /></p>
</div>
<div class="section" id="the-plan-for-this-tutorial">
<h2>The plan for this tutorial<a class="headerlink" href="#the-plan-for-this-tutorial" title="Permalink to this headline">¶</a></h2>
<p>This tutorial is structured in the following way: we will begin with a brief overview of key concepts you need to understand in order for git to really make sense.  We will then dive into hands-on work: after a brief interlude into necessary configuration we will discuss 5 “stages of git” with scenarios of increasing sophistication and complexity, introducing the necessary commands for each stage:</p>
<ol class="simple">
<li><p>Local, single-user, linear workflow</p></li>
<li><p>Single local user, branching</p></li>
<li><p>Using remotes as a single user</p></li>
<li><p>Remotes for collaborating in a small team</p></li>
<li><p>Full-contact github: distributed collaboration with large teams</p></li>
</ol>
<p>In reality, this tutorial only covers stages 1-4, since for #5 there are many software develoment-oriented tutorials and documents of very high quality online.  But most scientists start working alone with a few files or with a small team, so I feel it’s important to build first the key concepts and practices based on problems scientists encounter in their everyday life and without the jargon of the software world.  Once you’ve become familiar with 1-4, the excellent tutorials that exist about collaborating on github on open-source projects should make sense.</p>
</div>
<div class="section" id="very-high-level-picture-an-overview-of-key-concepts">
<h2>Very high level picture: an overview of key concepts<a class="headerlink" href="#very-high-level-picture-an-overview-of-key-concepts" title="Permalink to this headline">¶</a></h2>
<p>The <strong>commit</strong>: <em>a snapshot of work at a point in time</em></p>
<!-- offline: 
![](images/commit_anatomy.png)

<img src="https://raw.github.com/fperez/reprosw/master/fig/commit_anatomy.png">
-->
<p><img alt="" src="../../_images/commit_anatomy.png" /></p>
<p>Credit: ProGit book, by Scott Chacon, CC License.</p>
<p>A <strong>repository</strong>: a group of <em>linked</em> commits</p>
<!-- offline: 
![](files/images/threecommits.png)

<img src="https://raw.github.com/fperez/reprosw/master/fig/threecommits.png" >
-->
<p><img alt="" src="../../_images/threecommits.png" /></p>
<p>Note: these form a Directed Acyclic Graph (DAG), with nodes identified by their <em>hash</em>.</p>
<p>A <strong>hash</strong>: a fingerprint of the content of each commit <em>and its parent</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">sha1</span>

<span class="c1"># Our first commit</span>
<span class="n">data1</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;This is the start of my paper.&#39;</span>
<span class="n">meta1</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;date: 1/1/17&#39;</span>
<span class="n">hash1</span> <span class="o">=</span> <span class="n">sha1</span><span class="p">(</span><span class="n">data1</span> <span class="o">+</span> <span class="n">meta1</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">(</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hash:&#39;</span><span class="p">,</span> <span class="n">hash1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hash: 3b32905baabd5ff22b3832c892078f78f5e5bd3b
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Our second commit, linked to the first</span>
<span class="n">data2</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;Some more text in my paper...&#39;</span>
<span class="n">meta2</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;date: 1/2/1&#39;</span>
<span class="c1"># Note we add the parent hash here!</span>
<span class="n">hash2</span> <span class="o">=</span> <span class="n">sha1</span><span class="p">(</span><span class="n">data2</span> <span class="o">+</span> <span class="n">meta2</span> <span class="o">+</span> <span class="n">hash1</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hash:&#39;</span><span class="p">,</span> <span class="n">hash2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hash: 1c12d2aad51d5fc33e5b83a03b8787dfadde92a4
</pre></div>
</div>
</div>
</div>
<p>And this is pretty much the essence of Git!</p>
</div>
<div class="section" id="first-things-first-git-must-be-configured-before-first-use">
<h2>First things first: git must be configured before first use<a class="headerlink" href="#first-things-first-git-must-be-configured-before-first-use" title="Permalink to this headline">¶</a></h2>
<p>The minimal amount of configuration for git to work without pestering you is to tell it who you are. You should run a version of these commands in your shell:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git config --global user.name <span class="s2">&quot;Fernando Perez&quot;</span>
git config --global user.email <span class="s2">&quot;Fernando.Perez@berkeley.edu&quot;</span>
</pre></div>
</div>
<p>And while we’re at it, we also turn on the use of color, which is very useful</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git config --global color.ui <span class="s2">&quot;auto&quot;</span>
</pre></div>
</div>
<div class="section" id="convenient-credentials-management">
<h3>Convenient credentials management<a class="headerlink" href="#convenient-credentials-management" title="Permalink to this headline">¶</a></h3>
<p>Next, we configure git so that we manage our credentials without having to manually type our passwords for each and every operation.</p>
<p>For general users, Github offers in its help pages instructions on how to configure the credentials helper for <a class="reference external" href="https://help.github.com/articles/caching-your-github-password-in-git/#platform-mac">Mac OSX</a>, <a class="reference external" href="https://help.github.com/articles/caching-your-github-password-in-git/#platform-mac">Windows</a> and <a class="reference external" href="https://help.github.com/articles/caching-your-github-password-in-git/#platform-linux">Linux</a>.</p>
<p>But in this document we will focus on configuring the <a class="reference external" href="https://github.com/yuvipanda/github-app-user-auth">github app for JupyterHub</a> developed by Berkeley’s Yuvi Panda. Our JupyterHub already has this app pre-installed, which makes it very convenient to push and pull securely from selected repositories.</p>
<p>You will need to run this command, which adds the credentials information to the file <code class="docutils literal notranslate"><span class="pre">~/.gitconfig.local</span></code>, which we load from <code class="docutils literal notranslate"><span class="pre">~/.gitconfig</span></code> to store local information that may be different across systems (since we’ll be managing the global <code class="docutils literal notranslate"><span class="pre">~/.gitconfig</span></code> file through a fairly generic public git repository):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git config -f <span class="nv">$HOME</span>/.gitconfig.local credential.helper <span class="s2">&quot;store --file=/tmp/github-app-git-credentials&quot;</span>
</pre></div>
</div>
<p>And then, follow these steps, which you’ll need to do again each time you log into the Hub and want to push/pull to/from GitHub:</p>
<ol class="simple">
<li><p>Go to the <a class="reference external" href="https://github.com/apps/stat159-berkeley-datahub-access">Stat159 GitHub Auth App page</a> and add this app to your account. For now you can give it access to all your repos, or if you prefer, you can manually configure which repos you’ll be using (this will require a bit more manual maintenance through the semester).</p></li>
<li><p>Open a terminal, and type <code class="docutils literal notranslate"><span class="pre">github-app-user-auth</span></code>.</p></li>
<li><p>It should give you a link to go to, and a code to input into the web page when that link is opened. Open the link, enter the code there.</p></li>
<li><p>Grant access to the device in the web page, and you’re done!</p></li>
</ol>
<p>Authentication is valid for 8 hours, and once it expires, this process will need to be repeated, <em>except for the first step</em>. In the future, we might have a web app or other process to make this less painful. However, keeping the length of this session limited drastically helps with security too.</p>
<p>Later, you can see what repositories you’ve given it access to by visiting <a class="reference external" href="https://github.com/settings/installations">your GitHub installations page</a>.</p>
</div>
</div>
<div class="section" id="stage-1-local-single-user-linear-workflow">
<h2>Stage 1: Local, single-user, linear workflow<a class="headerlink" href="#stage-1-local-single-user-linear-workflow" title="Permalink to this headline">¶</a></h2>
<p>Type <code class="docutils literal notranslate"><span class="pre">git</span></code> to see a full list of all the ‘core’ commands.  We’ll now go through most of these via small practical exercises:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>git
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>usage: git [--version] [--help] [-C &lt;path&gt;] [-c &lt;name&gt;=&lt;value&gt;]
           [--exec-path[=&lt;path&gt;]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=&lt;path&gt;] [--work-tree=&lt;path&gt;] [--namespace=&lt;name&gt;]
           [--super-prefix=&lt;path&gt;] [--config-env=&lt;name&gt;=&lt;envvar&gt;]
           &lt;command&gt; [&lt;args&gt;]

These are common Git commands used in various situations:

start a working area (see also: git help tutorial)
   clone     Clone a repository into a new directory
   init      Create an empty Git repository or reinitialize an existing one

work on the current change (see also: git help everyday)
   add       Add file contents to the index
   mv        Move or rename a file, a directory, or a symlink
   restore   Restore working tree files
   rm        Remove files from the working tree and from the index

examine the history and state (see also: git help revisions)
   bisect    Use binary search to find the commit that introduced a bug
   diff      Show changes between commits, commit and working tree, etc
   grep      Print lines matching a pattern
   log       Show commit logs
   show      Show various types of objects
   status    Show the working tree status

grow, mark and tweak your common history
   branch    List, create, or delete branches
   commit    Record changes to the repository
   merge     Join two or more development histories together
   rebase    Reapply commits on top of another base tip
   reset     Reset current HEAD to the specified state
   switch    Switch branches
   tag       Create, list, delete or verify a tag object signed with GPG

collaborate (see also: git help workflows)
   fetch     Download objects and refs from another repository
   pull      Fetch from and integrate with another repository or a local branch
   push      Update remote refs along with associated objects

&#39;git help -a&#39; and &#39;git help -g&#39; list available subcommands and some
concept guides. See &#39;git help &lt;command&gt;&#39; or &#39;git help &lt;concept&gt;&#39;
to read about a specific subcommand or concept.
See &#39;git help git&#39; for an overview of the system.
</pre></div>
</div>
</div>
</div>
<div class="section" id="git-init-create-an-empty-repository">
<h3><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">init</span></code>: create an empty repository<a class="headerlink" href="#git-init-create-an-empty-repository" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">pwd</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;/Users/fperez/teach/stat159/2022sp/site/lectures/intro-git&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
rm -rf test
git init test
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Initialized empty Git repository in /Users/fperez/teach/stat159/2022sp/site/lectures/intro-git/test/.git/
</pre></div>
</div>
</div>
</div>
<p><strong>Note:</strong> all these cells below are meant to be run by you in a terminal  where  you change <em>once</em> to the <code class="docutils literal notranslate"><span class="pre">test</span></code> directory and continue working there.</p>
<p>Since we are putting all of them here in a single notebook for the purposes of the tutorial, they will all be prepended with the first two lines:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>%%bash
cd test
</pre></div>
</div>
<p>that tell IPython to do that each time.  But you should ignore those two lines and type the rest of each cell yourself in your terminal.</p>
<p>Let’s look at what git did:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

ls
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

ls -la
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>total 0
drwxr-xr-x  3 fperez  wavelet   96 Jan 25 23:50 .
drwxr-xr-x  6 fperez  wavelet  192 Jan 25 23:50 ..
drwxr-xr-x  9 fperez  wavelet  288 Jan 25 23:50 .git
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

ls -l .git
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>total 24
-rw-r--r--   1 fperez  wavelet   21 Jan 25 23:50 HEAD
-rw-r--r--   1 fperez  wavelet  137 Jan 25 23:50 config
-rw-r--r--   1 fperez  wavelet   73 Jan 25 23:50 description
drwxr-xr-x  15 fperez  wavelet  480 Jan 25 23:50 hooks
drwxr-xr-x   3 fperez  wavelet   96 Jan 25 23:50 info
drwxr-xr-x   4 fperez  wavelet  128 Jan 25 23:50 objects
drwxr-xr-x   4 fperez  wavelet  128 Jan 25 23:50 refs
</pre></div>
</div>
</div>
</div>
<p>Now let’s edit our first file in the test directory with a text editor… I’m doing it programatically here for automation purposes, but you’d normally be editing by hand</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

echo &quot;My first bit of text&quot; &gt; file1.txt
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="git-add-tell-git-about-this-new-file">
<h3><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>: tell git about this new file<a class="headerlink" href="#git-add-tell-git-about-this-new-file" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git add file1.txt
</pre></div>
</div>
</div>
</div>
<p>We can now ask git about what happened with <code class="docutils literal notranslate"><span class="pre">status</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git status
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>On branch main

No commits yet

Changes to be committed:
  (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)
	new file:   file1.txt
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="git-commit-permanently-record-our-changes-in-git-s-database">
<h3><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code>: permanently record our changes in git’s database<a class="headerlink" href="#git-commit-permanently-record-our-changes-in-git-s-database" title="Permalink to this headline">¶</a></h3>
<p>For now, we are <em>always</em> going to call <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> either with the <code class="docutils literal notranslate"><span class="pre">-a</span></code> option <em>or</em> with specific filenames (<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">file1</span> <span class="pre">file2...</span></code>).  This delays the discussion of an aspect of git called the <em>index</em> (often referred to also as the ‘staging area’) that we will cover later.  Most everyday work in regular scientific practice doesn’t require understanding the extra moving parts that the index involves, so on a first round we’ll bypass it.  Later on we will discuss how to use it to achieve more fine-grained control of what and how git records our actions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git commit -a -m&quot;This is our first commit&quot;
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[main (root-commit) a3ee476] This is our first commit
 1 file changed, 1 insertion(+)
 create mode 100644 file1.txt
</pre></div>
</div>
</div>
</div>
<p>In the commit above, we  used the <code class="docutils literal notranslate"><span class="pre">-m</span></code> flag to specify a message at the command line.  If we don’t do that, git will open the editor we specified in our configuration above and require that we enter a message.  By default, git refuses to record changes that don’t have a message to go along with them (though you can obviously ‘cheat’ by using an empty or meaningless string: git only tries to facilitate best practices, it’s not your nanny).</p>
</div>
<div class="section" id="git-log-what-has-been-committed-so-far">
<h3><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code>: what has been committed so far<a class="headerlink" href="#git-log-what-has-been-committed-so-far" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git log
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>commit a3ee47693d62d3be0e10cf25e2df2274263c32b8
Author: Fernando Pérez &lt;fernando.perez@berkeley.edu&gt;
Date:   Tue Jan 25 23:50:14 2022 -0800

    This is our first commit
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="git-diff-what-have-i-changed">
<h3><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span></code>: what have I changed?<a class="headerlink" href="#git-diff-what-have-i-changed" title="Permalink to this headline">¶</a></h3>
<p>Let’s do a little bit more work… Again, in practice you’ll be editing the files by hand, here we do it via shell commands for the sake of automation (and therefore the reproducibility of this tutorial!)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

echo &quot;And now some more text...&quot; &gt;&gt; file1.txt
</pre></div>
</div>
</div>
</div>
<p>And now we can ask git what is different:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git diff
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>diff --git a/file1.txt b/file1.txt
index ce645c7..4baa979 100644
--- a/file1.txt
+++ b/file1.txt
@@ -1 +1,2 @@
 My first bit of text
+And now some more text...
</pre></div>
</div>
</div>
</div>
<p>The format of the output above is well explained in detail in <a class="reference external" href="https://stackoverflow.com/questions/2529441/how-to-read-the-output-from-git-diff">this Stack Overflow post</a>.  But we can provide a brief summary here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">diff</span> <span class="o">--</span><span class="n">git</span> <span class="n">a</span><span class="o">/</span><span class="n">file1</span><span class="o">.</span><span class="n">txt</span> <span class="n">b</span><span class="o">/</span><span class="n">file1</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>This tells us which files changed overall, with ‘a’ representing the old path and ‘b’ the new one (in this case it’s the same file, though if a file had been renamed it would be different).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">index</span> <span class="n">ce645c7</span><span class="o">.</span><span class="mf">.4</span><span class="n">baa979</span> <span class="mi">100644</span>
</pre></div>
</div>
<p>These are hashes of the file at the two stages, needed by git itself for other operations with the diff output.</p>
<p>The next block shows the actual changes. The first two lines show which paths are being compared (in this case the same file, <code class="docutils literal notranslate"><span class="pre">file1.txt</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span> <span class="n">a</span><span class="o">/</span><span class="n">file1</span><span class="o">.</span><span class="n">txt</span>
<span class="o">+++</span> <span class="n">b</span><span class="o">/</span><span class="n">file1</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The next line indicates where the changes happened. The format is <code class="docutils literal notranslate"><span class="pre">&#64;&#64;</span> <span class="pre">from-file-range</span> <span class="pre">to-file-range</span> <span class="pre">&#64;&#64;</span></code>, where there’s one more <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> character than there’s parents to the file comparison (git can handle multi-way diff/merges), adn the file range format is <code class="docutils literal notranslate"><span class="pre">-/+&lt;start</span> <span class="pre">line&gt;,&lt;#</span> <span class="pre">of</span> <span class="pre">lines&gt;</span></code>, with <code class="docutils literal notranslate"><span class="pre">-</span></code> for the <code class="docutils literal notranslate"><span class="pre">from-file</span></code> and <code class="docutils literal notranslate"><span class="pre">+</span></code> for the <code class="docutils literal notranslate"><span class="pre">to-file</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">@@</span> <span class="o">-</span><span class="mi">1</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span> <span class="o">@@</span>
</pre></div>
</div>
<p>Lines prepended with <code class="docutils literal notranslate"><span class="pre">-</span></code> correspond to deletions (none in this case), and lines with <code class="docutils literal notranslate"><span class="pre">+</span></code> to additions. A few lines around deletions/additions are shown for context:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">My</span> <span class="n">first</span> <span class="n">bit</span> <span class="n">of</span> <span class="n">text</span>
<span class="o">+</span><span class="n">And</span> <span class="n">now</span> <span class="n">some</span> <span class="n">more</span> <span class="n">text</span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="the-cycle-of-git-virtue-work-commit-work-commit">
<h3>The cycle of git virtue: work, commit, work, commit, …<a class="headerlink" href="#the-cycle-of-git-virtue-work-commit-work-commit" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git commit -a -m&quot;I have made great progress on this critical matter.&quot;
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[main 963d786] I have made great progress on this critical matter.
 1 file changed, 1 insertion(+)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="git-log-revisited">
<h3><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> revisited<a class="headerlink" href="#git-log-revisited" title="Permalink to this headline">¶</a></h3>
<p>First, let’s see what the log shows us now:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git log
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>commit 963d78694d2b4e10d8b2fea40181760314186e21
Author: Fernando Pérez &lt;fernando.perez@berkeley.edu&gt;
Date:   Tue Jan 25 23:50:23 2022 -0800

    I have made great progress on this critical matter.

commit a3ee47693d62d3be0e10cf25e2df2274263c32b8
Author: Fernando Pérez &lt;fernando.perez@berkeley.edu&gt;
Date:   Tue Jan 25 23:50:14 2022 -0800

    This is our first commit
</pre></div>
</div>
</div>
</div>
<p>Sometimes it’s handy to see a very summarized version of the log:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git log --oneline --topo-order --graph
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>* 963d786 I have made great progress on this critical matter.
* a3ee476 This is our first commit
</pre></div>
</div>
</div>
</div>
<p>Git supports <em>aliases:</em> new names given to command combinations. Let’s make this handy shortlog an alias, so we only have to type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">slog</span></code> and see this compact log:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

# We create our alias (this saves it in git&#39;s permanent configuration file):
git config --global alias.slog &quot;log --oneline --topo-order --graph&quot;

# And now we can use it
git slog
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>* 963d786 I have made great progress on this critical matter.
* a3ee476 This is our first commit
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="git-mv-and-rm-moving-and-removing-files">
<h3><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">mv</span></code> and <code class="docutils literal notranslate"><span class="pre">rm</span></code>: moving and removing files<a class="headerlink" href="#git-mv-and-rm-moving-and-removing-files" title="Permalink to this headline">¶</a></h3>
<p>While <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> is used to add fils to the list git tracks, we must also tell it if we want their  names to change or for it to stop tracking them.  In familiar Unix fashion, the <code class="docutils literal notranslate"><span class="pre">mv</span></code> and <code class="docutils literal notranslate"><span class="pre">rm</span></code> git commands do precisely this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git mv file1.txt file-newname.txt
git status
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>On branch main
Changes to be committed:
  (use &quot;git restore --staged &lt;file&gt;...&quot; to unstage)
	renamed:    file1.txt -&gt; file-newname.txt
</pre></div>
</div>
</div>
</div>
<p>Note that these changes must be committed too, to become permanent!  In git’s world, until something hasn’t been committed, it isn’t permanently recorded anywhere.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git commit -a -m&quot;I like this new name better&quot;
echo &quot;Let&#39;s look at the log again:&quot;
git slog
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[main ae5580b] I like this new name better
 1 file changed, 0 insertions(+), 0 deletions(-)
 rename file1.txt =&gt; file-newname.txt (100%)
Let&#39;s look at the log again:
* ae5580b I like this new name better
* 963d786 I have made great progress on this critical matter.
* a3ee476 This is our first commit
</pre></div>
</div>
</div>
</div>
<p>And <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rm</span></code> works in a similar fashion.</p>
</div>
<div class="section" id="exercise">
<h3>Exercise<a class="headerlink" href="#exercise" title="Permalink to this headline">¶</a></h3>
<p>Add a new file <code class="docutils literal notranslate"><span class="pre">file2.txt</span></code>, commit it, make some changes to it, commit them again, and then remove it (and don’t forget to commit this last step!).</p>
</div>
</div>
<div class="section" id="local-user-branching">
<h2>Local user, branching<a class="headerlink" href="#local-user-branching" title="Permalink to this headline">¶</a></h2>
<p>What is a branch?  Simply a <em>label for the ‘current’ commit in a sequence of ongoing commits</em>:</p>
<p><img alt="" src="../../_images/masterbranch.png" /></p>
<!-- offline: 
<img src="https://raw.github.com/fperez/reprosw/master/fig/masterbranch.png" >
--><p>There can be multiple branches alive at any point in time; the working directory is the state of a special pointer called HEAD.  In this example there are two branches, <em>master</em> and <em>testing</em>, and <em>testing</em> is the currently active branch since it’s what HEAD points to:</p>
<p><img alt="" src="../../_images/HEAD_testing.png" /></p>
<!-- offline: 
<img src="https://raw.github.com/fperez/reprosw/master/fig/HEAD_testing.png" >
--><p>Once new commits are made on a branch, HEAD and the branch label move with the new commits:</p>
<p><img alt="" src="../../_images/branchcommit.png" /></p>
<p>This allows the history of both branches to diverge:</p>
<p><img alt="" src="../../_images/mergescenario.png" /></p>
<p>But based on this graph structure, git can compute the necessary information to merge the divergent branches back and continue with a unified line of development:</p>
<p><img alt="" src="../../_images/mergeaftermath.png" /></p>
<p>Let’s now illustrate all of this with a concrete example.  Let’s get our bearings first:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git status
ls
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>On branch main
nothing to commit, working tree clean
file-newname.txt
</pre></div>
</div>
</div>
</div>
<p>We are now going to try two different routes of development: on the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch we will add one file and on the <code class="docutils literal notranslate"><span class="pre">experiment</span></code> branch, which we will create, we will add a different one.  We will then merge the experimental branch into <code class="docutils literal notranslate"><span class="pre">master</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git switch -c experiment
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Switched to a new branch &#39;experiment&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

echo &quot;Some crazy idea&quot; &gt; experiment.txt
git add experiment.txt
git commit -a -m&quot;Trying something new&quot;
git slog
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[experiment b71b77a] Trying something new
 1 file changed, 1 insertion(+)
 create mode 100644 experiment.txt
* b71b77a Trying something new
* ae5580b I like this new name better
* 963d786 I have made great progress on this critical matter.
* a3ee476 This is our first commit
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git switch main
git slog
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Switched to branch &#39;main&#39;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>* ae5580b I like this new name better
* 963d786 I have made great progress on this critical matter.
* a3ee476 This is our first commit
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

echo &quot;All the while, more work goes on in master...&quot; &gt;&gt; file-newname.txt
git commit -a -m&quot;The mainline keeps moving&quot;
git slog
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[main eddded5] The mainline keeps moving
 1 file changed, 1 insertion(+)
* eddded5 The mainline keeps moving
* ae5580b I like this new name better
* 963d786 I have made great progress on this critical matter.
* a3ee476 This is our first commit
</pre></div>
</div>
</div>
</div>
<p>By default, all variations of the git <code class="docutils literal notranslate"><span class="pre">log</span></code> commands only show the currently active branch.  If we want to see <em>all</em> branches, we can ask for them with the <code class="docutils literal notranslate"><span class="pre">--all</span></code> flag:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git slog --all
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>* eddded5 The mainline keeps moving
| * b71b77a Trying something new
|/  
* ae5580b I like this new name better
* 963d786 I have made great progress on this critical matter.
* a3ee476 This is our first commit
</pre></div>
</div>
</div>
</div>
<p>Above, we can see the commit whose message is <code class="docutils literal notranslate"><span class="pre">Try</span> <span class="pre">something</span> <span class="pre">new</span></code>, that comes from the <code class="docutils literal notranslate"><span class="pre">experiment</span></code> branch.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

ls
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>file-newname.txt
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git merge experiment
git slog
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Merge made by the &#39;ort&#39; strategy.
 experiment.txt | 1 +
 1 file changed, 1 insertion(+)
 create mode 100644 experiment.txt
*   e752aa4 Merge branch &#39;experiment&#39;
|\  
| * b71b77a Trying something new
* | eddded5 The mainline keeps moving
|/  
* ae5580b I like this new name better
* 963d786 I have made great progress on this critical matter.
* a3ee476 This is our first commit
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="using-remotes-as-a-single-user">
<h2>Using remotes as a single user<a class="headerlink" href="#using-remotes-as-a-single-user" title="Permalink to this headline">¶</a></h2>
<p>We are now going to introduce the concept of a <em>remote repository</em>: a pointer to another copy of the repository that lives on a different location.  This can be simply a different path on the filesystem or a server on the internet.</p>
<p>For this discussion, we’ll be using remotes hosted on the <a class="reference external" href="http://github.com">GitHub.com</a> service, but you can equally use other services like <a class="reference external" href="http://bitbucket.org">BitBucket</a> or <a class="reference external" href="http://gitorious.org">Gitorious</a> as well as host your own.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

ls
echo &quot;Let&#39;s see if we have any remote repositories here:&quot;
git remote -v
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>experiment.txt
file-newname.txt
Let&#39;s see if we have any remote repositories here:
</pre></div>
</div>
</div>
</div>
<p>Since the above cell didn’t produce any output after the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">-v</span></code> call, it means we have no remote repositories configured.  We will now proceed to do so.  Once logged into GitHub, go to the <a class="reference external" href="https://github.com/new">new repository page</a> and make a repository called <code class="docutils literal notranslate"><span class="pre">test</span></code>.  Do <strong>not</strong> check the box that says <code class="docutils literal notranslate"><span class="pre">Initialize</span> <span class="pre">this</span> <span class="pre">repository</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">README</span></code>, since we already have an existing repository here.  That option is useful when you’re starting first at Github and don’t have a repo made already on a local computer.</p>
<p>We can now follow the instructions from the next page:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git remote add origin https://github.com/fperez/test.git
git branch -M main
git push -u origin main
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>error: remote origin already exists.
To https://github.com/fperez/test.git
 * [new branch]      main -&gt; main
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>branch &#39;main&#39; set up to track &#39;origin/main&#39;.
</pre></div>
</div>
</div>
</div>
<p>Let’s see the remote situation again:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git remote -v
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>origin	https://github.com/fperez/test.git (fetch)
origin	https://github.com/fperez/test.git (push)
</pre></div>
</div>
</div>
</div>
<p>We can now <a class="reference external" href="https://github.com/fperez/test">see this repository publicly on github</a>.</p>
<p>Let’s see how this can be useful for backup and syncing work between two different computers.  I’ll simulate a 2nd computer by working in a different directory…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>

# Here I clone my &#39;test&#39; repo but with a different name, test2, to simulate a 2nd computer
git clone https://github.com/fperez/test.git test2
cd test2
pwd
git remote -v
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Cloning into &#39;test2&#39;...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/fperez/teach/stat159/2022sp/site/lectures/intro-git/test2
origin	https://github.com/fperez/test.git (fetch)
origin	https://github.com/fperez/test.git (push)
</pre></div>
</div>
</div>
</div>
<p>Let’s now make some changes in one ‘computer’ and synchronize them on the second.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test2  # working on computer #2

echo &quot;More new content on my experiment&quot; &gt;&gt; experiment.txt
git commit -a -m&quot;More work, on machine #2&quot;
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[main 2320847] More work, on machine #2
 1 file changed, 1 insertion(+)
</pre></div>
</div>
</div>
</div>
<p>Now we put this new work up on the github server so it’s available from the internet</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test2

git push
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>To https://github.com/fperez/test.git
   e752aa4..2320847  main -&gt; main
</pre></div>
</div>
</div>
</div>
<p>Now let’s fetch that work from machine #1:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git pull
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>From https://github.com/fperez/test
   e752aa4..2320847  main       -&gt; origin/main
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Updating e752aa4..2320847
Fast-forward
 experiment.txt | 1 +
 1 file changed, 1 insertion(+)
</pre></div>
</div>
</div>
</div>
<div class="section" id="an-important-aside-conflict-management">
<h3>An important aside: conflict management<a class="headerlink" href="#an-important-aside-conflict-management" title="Permalink to this headline">¶</a></h3>
<p>While git is very good at merging, if two different branches modify the same file in the same location, it simply can’t decide which change should prevail.  At that point, human intervention is necessary to make the decision.  Git will help you by marking the location in the file that has a problem, but it’s up to you to resolve the conflict.  Let’s see how that works by intentionally creating a conflict.</p>
<p>We start by creating a branch and making a change to our experiment file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git switch -c trouble
echo &quot;This is going to be a problem...&quot; &gt;&gt; experiment.txt
git commit -a -m&quot;Changes in the trouble branch&quot;
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[trouble c480fb4] Changes in the trouble branch
 1 file changed, 1 insertion(+)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Switched to branch &#39;trouble&#39;
</pre></div>
</div>
</div>
</div>
<p>And now we go back to the master branch, where we change the <em>same</em> file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git switch main
echo &quot;More work on the master branch...&quot; &gt;&gt; experiment.txt
git commit -a -m&quot;Mainline work&quot;
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Your branch is up-to-date with &#39;origin/master&#39;.
[master a8694ad] Mainline work
 1 file changed, 1 insertion(+)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Switched to branch &#39;master&#39;
</pre></div>
</div>
</div>
</div>
<p>So now let’s see what happens if we try to merge the <code class="docutils literal notranslate"><span class="pre">trouble</span></code> branch into <code class="docutils literal notranslate"><span class="pre">master</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git merge trouble
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Auto-merging experiment.txt
CONFLICT (content): Merge conflict in experiment.txt
Automatic merge failed; fix conflicts and then commit the result.
</pre></div>
</div>
</div>
</div>
<p>Let’s see what git has put into our file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

cat experiment.txt
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Some crazy idea
More new content on my experiment
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
More work on the master branch...
=======
This is going to be a problem...
&gt;&gt;&gt;&gt;&gt;&gt;&gt; trouble
</pre></div>
</div>
</div>
</div>
<p>At this point, we go into the file with a text editor, decide which changes to keep, and make a new commit that records our decision.  I’ve now made the edits, in this case I decided that both pieces of text were useful, but integrated them with some changes:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

cat experiment.txt
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Some crazy idea
More new content on my experiment
More work on the master branch...
This is going to be a problem...
</pre></div>
</div>
</div>
</div>
<p>Let’s then make our new commit:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%</span><span class="k">bash</span>
cd test

git commit -a -m&quot;Completed merge of trouble, fixing conflicts along the way&quot;
git slog
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[master 28e0c56] Completed merge of trouble, fixing conflicts along the way
*   28e0c56 Completed merge of trouble, fixing conflicts along the way
|\  
| * c480fb4 Changes in the trouble branch
* | a8694ad Mainline work
|/  
* 94c7438 More work, on machine #2
*   27b0ec9 Merge branch &#39;experiment&#39;
|\  
| * 2cba531 Trying something new
* | ff8b2ec The mainline keeps moving
|/  
* 005d8e2 I like this new name better
* e819b08 I have made great progress on this critical matter.
* 1f299f3 This is our first commit
</pre></div>
</div>
</div>
</div>
<p><em>Note:</em> While it’s a good idea to understand the basics of fixing merge conflicts by hand, in some cases you may find the use of an automated tool useful.  Git supports multiple <a class="reference external" href="https://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html">merge tools</a>: a merge tool is a piece of software that conforms to a basic interface and knows how to merge two files into a new one.  Since these are typically graphical tools, there are various to choose from for the different operating systems, and as long as they obey a basic command structure, git can work with any of them.</p>
</div>
</div>
<div class="section" id="collaborating-on-github-with-a-small-team">
<h2>Collaborating on github with a small team<a class="headerlink" href="#collaborating-on-github-with-a-small-team" title="Permalink to this headline">¶</a></h2>
<p>Single remote with shared access: we are going to set up a shared collaboration with one partner (the person sitting next to you).  This will show the basic workflow of collaborating on a project with a small team where everyone has write privileges to the same repository.</p>
<p>Note for SVN users: this is similar to the classic SVN workflow, with the distinction that commit and push are separate steps.  SVN, having no local repository, commits directly to the shared central resource, so to a first approximation you can think of <code class="docutils literal notranslate"><span class="pre">svn</span> <span class="pre">commit</span></code> as being synonymous with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit;</span> <span class="pre">git</span> <span class="pre">push</span></code>.</p>
<p>We will have two people, let’s call them Alice and Bob, sharing a repository.  Alice will be the owner of the repo and she will give Bob write privileges.</p>
<p>We begin with a simple synchronization example, much like we just did above, but now between <em>two people</em> instead of one person.  Otherwise it’s the same:</p>
<ul class="simple">
<li><p>Bob clones Alice’s repository.</p></li>
<li><p>Bob makes changes to a file and commits them locally.</p></li>
<li><p>Bob pushes his changes to github.</p></li>
<li><p>Alice pulls Bob’s changes into her own repository.</p></li>
</ul>
<p>Next, we will have both parties make non-conflicting changes each, and commit them locally.  Then both try to push their changes:</p>
<ul class="simple">
<li><p>Alice adds a new file, <code class="docutils literal notranslate"><span class="pre">alice.txt</span></code> to the repo and commits.</p></li>
<li><p>Bob adds <code class="docutils literal notranslate"><span class="pre">bob.txt</span></code> and commits.</p></li>
<li><p>Alice pushes to github.</p></li>
<li><p>Bob tries to push to github.  What happens here?</p></li>
</ul>
<p>The problem is that Bob’s changes create a commit that conflicts with Alice’s, so git refuses to apply them.  It forces Bob to first do the merge on his machine, so that if there is a conflict in the merge, Bob deals with the conflict manually (git could try to do the merge on the server, but in that case if there’s a conflict, the server repo would be left in a conflicted state without a human to fix things up).  The solution is for Bob to first pull the changes (pull in git is really fetch+merge), and then push again.</p>
</div>
<div class="section" id="full-contact-github-distributed-collaboration-with-large-teams">
<h2>Full-contact github: distributed collaboration with large teams<a class="headerlink" href="#full-contact-github-distributed-collaboration-with-large-teams" title="Permalink to this headline">¶</a></h2>
<p>Multiple remotes and merging based on pull request workflow: this is beyond the scope of this brief tutorial, so we’ll simply discuss how it works very briefly, illustrating it with the activity on the <a class="reference external" href="http://github.com/ipython/ipython">IPython github repository</a>.</p>
</div>
<div class="section" id="other-useful-commands">
<h2>Other useful commands<a class="headerlink" href="#other-useful-commands" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-show.html">show</a></p></li>
<li><p><a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-reflog.html">reflog</a></p></li>
<li><p><a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html">rebase</a></p></li>
<li><p><a class="reference external" href="http://www.kernel.org/pub/software/scm/git/docs/git-tag.html">tag</a></p></li>
</ul>
</div>
<div class="section" id="git-resources">
<h2>Git resources<a class="headerlink" href="#git-resources" title="Permalink to this headline">¶</a></h2>
<div class="section" id="introductory-materials">
<h3>Introductory materials<a class="headerlink" href="#introductory-materials" title="Permalink to this headline">¶</a></h3>
<p>There are lots of good tutorials and introductions for Git, which you
can easily find yourself; this is just a short list of things I’ve found
useful.  For a beginner, I would recommend the following ‘core’ reading list, and
below I mention a few extra resources:</p>
<ol class="simple">
<li><p>The smallest, and in the style of this tuorial: <a class="reference external" href="http://rogerdudler.github.com/git-guide">git - the simple guide</a>
contains ‘just the basics’.  Very quick read.</p></li>
<li><p>In my own experience, the most useful resource was <a class="reference external" href="http://www.sbf5.com/~cduan/technical/git">Understanding Git
Conceptually</a>.
Git has a reputation for being hard to use, but I have found that with a
clear view of what is actually a <em>very simple</em> internal design, its
behavior is remarkably consistent, simple and comprehensible.</p></li>
<li><p>For more detail, see the start of the excellent <a class="reference external" href="http://book.git-scm.com">Pro Git book</a>.</p></li>
<li><p>You can also <a class="reference external" href="https://try.github.io">try Git in your browser</a> thanks to GitHub’s interactive tutorial.</p></li>
</ol>
<p>If you are really impatient and just want a quick start, this <a class="reference external" href="http://www.ralfebert.de/blog/tools/visual_git_tutorial_1">visual git tutorial</a>
may be sufficient. It is nicely illustrated with diagrams that show what happens on the filesystem.</p>
<p>For windows users, <a class="reference external" href="http://nathanj.github.com/gitguide/tour.html">an Illustrated Guide to Git on Windows</a> is useful in that
it contains also some information about handling SSH (necessary to interface with git hosted on remote servers when collaborating) as well
as screenshots of the Windows interface.</p>
<p>Cheat sheets: a useful <a class="reference external" href="https://github.com/nerdgirl/git-cheatsheet-visual/blob/master/gitcheatsheet.pdf">summary of common commands</a> in PDF format that can be printed for frequent reference.  <a class="reference external" href="https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf">Another nice PDF one</a>.</p>
</div>
<div class="section" id="beyond-the-basics">
<h3>Beyond the basics<a class="headerlink" href="#beyond-the-basics" title="Permalink to this headline">¶</a></h3>
<p>At some point, it will pay off to understand how git itself is <em>built</em>.  These two documents, written in a similar spirit, are probably the most useful descriptions of the Git architecture short of diving into the actual implementation.  They walk you through
how you would go about building a version control system with a little story. By the end you realize that Git’s model is almost an inevitable outcome of the proposed constraints:</p>
<p>The <a class="reference external" href="http://tom.preston-werner.com/2009/05/19/the-git-parable.html">Git parable</a> by Tom Preston-Werner.</p>
<p><a class="reference external" href="http://matthew-brett.github.com/pydagogue/foundation.html">Git foundations</a> by Matthew Brett.</p>
<p><a class="reference external" href="http://www.gitready.com">Git ready</a>: A great website of posts on specific git-related topics, organized by difficulty.</p>
<p><a class="reference external" href="http://sourceforge.net/projects/qgit/">QGit</a>: an excellent Git GUI.</p>
<p>Git ships by default with gitk and git-gui, a pair of Tk graphical clients to browse a repo and to operate in it. I personally have found <a class="reference external" href="http://sourceforge.net/projects/qgit/">qgit</a> to be nicer and easier to use. It is available on modern linux distros, and since it is based on Qt, it should run on OSX and Windows.</p>
<p><a class="reference external" href="http://www-cs-students.stanford.edu/~blynn/gitmagic/index.html">Git Magic</a></p>
<p>Another book-size guide that has useful snippets.</p>
<p>A <a class="reference external" href="http://cworth.org/hgbook-git/tour">port</a> of the Hg book’s beginning</p>
<p>The <a class="reference external" href="http://hgbook.red-bean.com">Mercurial book</a> has a reputation for clarity, so Carl Worth decided to <a class="reference external" href="http://cworth.org/hgbook-git/tour">port</a> its introductory chapter to Git. It’s a nicely written intro, which is possible in good measure because of how similar the underlying models of Hg and Git ultimately are.</p>
<p>Finally, if you prefer a video presentation, this 1-hour tutorial prepared by the GitHub educational team will walk you through the entire process:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">YouTubeVideo</span>
<span class="n">YouTubeVideo</span><span class="p">(</span><span class="s1">&#39;U8GBXvdmHT4&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<iframe
    width="400"
    height="300"
    src="https://www.youtube.com/embed/U8GBXvdmHT4"
    frameborder="0"
    allowfullscreen
></iframe>
</div></div>
</div>
</div>
<div class="section" id="a-few-useful-tips-for-common-tasks">
<h3>A few useful tips for common tasks<a class="headerlink" href="#a-few-useful-tips-for-common-tasks" title="Permalink to this headline">¶</a></h3>
<div class="section" id="better-shell-support">
<h4>Better shell support<a class="headerlink" href="#better-shell-support" title="Permalink to this headline">¶</a></h4>
<p>Adding git branch info to your bash prompt and tab completion for git commands and branches is extremely useful.  I suggest you at least copy:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/git/git/blob/master/contrib/completion/git-completion.bash">git-completion.bash</a></p></li>
<li><p><a class="reference external" href="https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh">git-prompt.sh</a></p></li>
</ul>
<p>You can then source both of these files in your <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> and then set your prompt (I’ll assume you named them as the originals but starting with a <code class="docutils literal notranslate"><span class="pre">.</span></code> at the front of the name):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>source $HOME/.git-completion.bash
source $HOME/.git-prompt.sh
PS1=&#39;[\u@\h \W$(__git_ps1 &quot; (%s)&quot;)]\$ &#39;   # adjust this to your prompt liking
</pre></div>
</div>
<p>See the comments in both of those files for lots of extra functionality they offer.</p>
</div>
<div class="section" id="embedding-git-information-in-latex-documents">
<h4>Embedding Git information in LaTeX documents<a class="headerlink" href="#embedding-git-information-in-latex-documents" title="Permalink to this headline">¶</a></h4>
<p>(Sent by <a class="reference external" href="http://www.onerussian.com">Yaroslav Halchenko</a>)</p>
<p>I use a Make rule:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Helper if interested in providing proper version tag within the manuscript
revision.tex: ../misc/revision.tex.in ../.git/index
   GITID=$$(git log -1 | grep -e &#39;^commit&#39; -e &#39;^Date:&#39; | sed  -e &#39;s/^[^ ]* *//g&#39; | tr &#39;\n&#39; &#39; &#39;); \
   echo $$GITID; \
   sed -e &quot;s/GITID/$$GITID/g&quot; $&lt; &gt;| $@
</pre></div>
</div>
<p>in the top level <code class="docutils literal notranslate"><span class="pre">Makefile.common</span></code> which is included in all
subdirectories which actually contain papers (hence all those
<code class="docutils literal notranslate"><span class="pre">../.git</span></code>). The <code class="docutils literal notranslate"><span class="pre">revision.tex.in</span></code> file is simply:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>% Embed GIT ID revision and date
\def\revision{GITID}
</pre></div>
</div>
<p>The corresponding <code class="docutils literal notranslate"><span class="pre">paper.pdf</span></code> depends on <code class="docutils literal notranslate"><span class="pre">revision.tex</span></code> and includes the
line <code class="docutils literal notranslate"><span class="pre">\input{revision}</span></code> to load up the actual revision mark.</p>
</div>
<div class="section" id="git-export">
<h4>git export<a class="headerlink" href="#git-export" title="Permalink to this headline">¶</a></h4>
<p>Git doesn’t have a native export command, but this works just fine:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git archive --prefix=fperez.org/  master | gzip &gt; ~/tmp/source.tgz
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./lectures/intro-git"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../../syllabus.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Syllabus for Statistics 159/259: Reproducible and Collaborative Statistical Data Science</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="git-visuals.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Git Visuals</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Fernando Pérez<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>